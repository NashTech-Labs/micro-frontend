-- This script was generated by the ERD tool in pgAdmin 4.
-- Please log an issue at https://github.com/pgadmin-org/pgadmin4/issues/new/choose if you find any bugs, including reproduction steps.
BEGIN;


CREATE TABLE IF NOT EXISTS public.access_labels
(
    id serial NOT NULL,
    isemployeecreate boolean DEFAULT false,
    isemployeeupdate boolean DEFAULT false,
    isemployeeread boolean DEFAULT false,
    isemployeedelete boolean DEFAULT false,
    isprojectcreate boolean DEFAULT false,
    isprojectupdate boolean DEFAULT false,
    isprojectread boolean DEFAULT false,
    isprojectdelete boolean DEFAULT false,
    iscompetencycreate boolean DEFAULT false,
    iscompetencyread boolean DEFAULT false,
    iscompetencyupdate boolean DEFAULT false,
    iscompetencydelete boolean DEFAULT false,
    ispracticecreate boolean DEFAULT false,
    ispracticeread boolean DEFAULT false,
    ispracticeupdate boolean DEFAULT false,
    ispracticedelete boolean DEFAULT false,
    iscsvupload boolean DEFAULT false,
    isprofileupdate boolean DEFAULT false,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    employee_id integer,
    CONSTRAINT access_labels_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.competency
(
    id serial NOT NULL,
    competency_name character varying(255) COLLATE pg_catalog."default" NOT NULL,
    competency_code character varying(255) COLLATE pg_catalog."default" NOT NULL,
    competency_admin_email character varying(255) COLLATE pg_catalog."default" NOT NULL,
    status character varying(255) COLLATE pg_catalog."default",
    total_project integer,
    total_employee integer,
    description text COLLATE pg_catalog."default",
    image text COLLATE pg_catalog."default",
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    competency_head integer,
    CONSTRAINT competency_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.competency_skills
(
    id serial NOT NULL,
    title character varying(255) COLLATE pg_catalog."default" NOT NULL,
    technology character varying(255) COLLATE pg_catalog."default",
    role character varying(255) COLLATE pg_catalog."default",
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT competency_skills_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.designation
(
    id serial NOT NULL,
    title character varying(255) COLLATE pg_catalog."default" NOT NULL,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT designation_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.employee
(
    id serial NOT NULL,
    first_name character varying(255) COLLATE pg_catalog."default" NOT NULL,
    last_name character varying(255) COLLATE pg_catalog."default",
    designation character varying(255) COLLATE pg_catalog."default",
    role character varying(255) COLLATE pg_catalog."default",
    gender character varying(255) COLLATE pg_catalog."default",
    email character varying(255) COLLATE pg_catalog."default" NOT NULL,
    password character varying(255) COLLATE pg_catalog."default" NOT NULL,
    image character varying(255) COLLATE pg_catalog."default",
    location character varying(255) COLLATE pg_catalog."default",
    marital_status character varying(255) COLLATE pg_catalog."default",
    blood_group character varying(255) COLLATE pg_catalog."default",
    phy_disable character varying(255) COLLATE pg_catalog."default",
    pan_card character varying(255) COLLATE pg_catalog."default",
    aadhaar_card character varying(255) COLLATE pg_catalog."default",
    uan character varying(255) COLLATE pg_catalog."default",
    personal_email character varying(255) COLLATE pg_catalog."default",
    phone character varying(255) COLLATE pg_catalog."default",
    whatsapp character varying(255) COLLATE pg_catalog."default",
    wordpress character varying(255) COLLATE pg_catalog."default",
    github character varying(255) COLLATE pg_catalog."default",
    bitbuket character varying(255) COLLATE pg_catalog."default",
    work_phone character varying(255) COLLATE pg_catalog."default",
    address character varying(255) COLLATE pg_catalog."default",
    tenant_id integer NOT NULL,
    studio_name character varying(255) COLLATE pg_catalog."default",
    status character varying(255) COLLATE pg_catalog."default" DEFAULT 'active'::character varying,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    competency_head boolean,
    reporting_manager integer,
    CONSTRAINT employee_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.employee_skills
(
    id serial NOT NULL,
    employee_id integer NOT NULL,
    skill_id integer,
    skill_name character varying(255) COLLATE pg_catalog."default" NOT NULL,
    level integer NOT NULL,
    studio_id integer NOT NULL,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT employee_skills_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.practice
(
    id serial NOT NULL,
    title character varying(255) COLLATE pg_catalog."default" NOT NULL,
    description text COLLATE pg_catalog."default",
    total_employee integer,
    status character varying(255) COLLATE pg_catalog."default" DEFAULT 'active'::character varying,
    studio_head character varying(255) COLLATE pg_catalog."default",
    location character varying(255) COLLATE pg_catalog."default",
    code character varying(255) COLLATE pg_catalog."default",
    image text COLLATE pg_catalog."default",
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT practice_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.project
(
    id serial NOT NULL,
    title character varying(255) COLLATE pg_catalog."default",
    timeline character varying(255) COLLATE pg_catalog."default",
    description character varying COLLATE pg_catalog."default",
    status character varying(255) COLLATE pg_catalog."default",
    duration character varying(255) COLLATE pg_catalog."default",
    start_date date,
    end_date date,
    file character varying COLLATE pg_catalog."default",
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT project_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.project_employees
(
    id serial NOT NULL,
    project_id integer NOT NULL,
    employee_id integer NOT NULL,
    role character varying(255) COLLATE pg_catalog."default",
    billable boolean,
    billable_percentage character varying(255) COLLATE pg_catalog."default",
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT project_employees_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.skill
(
    id serial NOT NULL,
    skill_name character varying(255) COLLATE pg_catalog."default" NOT NULL,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT skill_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.skills
(
    id serial NOT NULL,
    skill_name character varying(255) COLLATE pg_catalog."default" NOT NULL,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT skills_pkey PRIMARY KEY (id)
);

ALTER TABLE IF EXISTS public.access_labels
    ADD CONSTRAINT fk_employee_id FOREIGN KEY (employee_id)
    REFERENCES public.employee (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.competency
    ADD CONSTRAINT fk_competency_head FOREIGN KEY (competency_head)
    REFERENCES public.employee (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.employee
    ADD CONSTRAINT fk_reporting_manager FOREIGN KEY (reporting_manager)
    REFERENCES public.employee (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.project_employees
    ADD CONSTRAINT fk_employee FOREIGN KEY (employee_id)
    REFERENCES public.employee (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE CASCADE;


ALTER TABLE IF EXISTS public.project_employees
    ADD CONSTRAINT fk_project FOREIGN KEY (project_id)
    REFERENCES public.project (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE CASCADE;

END;